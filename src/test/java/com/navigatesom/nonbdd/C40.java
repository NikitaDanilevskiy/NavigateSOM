package com.navigatesom.nonbdd;

import actions.Actions;
import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.Test;
import pages.Pages;
import utils.BaseTest;
import utils.Constants;
import utils.SelenideTools;

import java.util.ArrayList;

public class C40 extends BaseTest {

    @Test(description = "com.navigatesom.nonbdd.C40, Verify that the uploaded file should include required headers without extra spaces")
    public void checkingThe1bAlgorithm()
    {
        String errorMessage = "Invalid Header: Expected Order ID, Order Date, Customer ID";
        Actions.loginActions().loginToDemoSom(Constants.demoEmail, Constants.demoPassword);
        Pages.newSomUploadsPage().openUploadsTab();
        Pages.newSomUploadsPage().clickUploadButton();
        Pages.newSomUploadsPage().uploadFile(Constants.extraSpacesFile);
        Assert.assertEquals(errorMessage,Pages.newSomUploadsPage().getErrorUploadMessage());
    }

    @AfterMethod
    public void deleteLastUpload()
    {
        SelenideTools.refresh();
        Pages.newSomRequestDeleterPage().openRequestDeleterTab();
        SelenideTools.sleep(2);
        Pages.newSomRequestDeleterPage().clearDemoData();
        SelenideTools.sleep(2);
        Pages.newSomRequestDeleterPage().clickPopUpOkButton();
        SelenideTools.sleep(5);
    }
}
